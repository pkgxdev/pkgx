name: cache
runs:
  using: "composite"
  steps:
    - run: |
        case ${{ runner.os }} in
        macOS)
          echo 'path=~/Library/Caches/deno/deps' >> $GITHUB_OUTPUT;;
        *)
          echo 'path=~/.cache/deno' >> $GITHUB_OUTPUT;;
        esac
      id: cache
      shell: bash
    - uses: actions/cache@v3
      with:
        path: ${{ steps.cache.outputs.path }}
        restore-keys: ${{ runner.os }}-deno-
        key: ${{ runner.os }}-deno-${{ hashFiles('deno.jsonc')}}
    - run: find ${{ steps.cache.outputs.path }}
      shell: bash
